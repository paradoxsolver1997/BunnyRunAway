<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ° Bunny Runaway</title>
    <!-- Markdown æ¸²æŸ“åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    
    <!-- å¤–éƒ¨æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/dialogs.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- åŠ è½½è¦†ç›–å±‚ -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <h2>ğŸ° Loading Game System...</h2>
        
        <!-- è¿›åº¦æ¡å®¹å™¨ -->
        <div class="loading-progress-container">
            <div class="loading-progress-bar">
                <div id="loadingProgressBar" class="loading-progress-fill"></div>
            </div>
            <div id="loadingPercentage" class="loading-percentage">0%</div>
        </div>
        
        <!-- è¯¦ç»†çŠ¶æ€ä¿¡æ¯ -->
        <div class="loading-details">
            <div id="loadingStatus" class="loading-status">Initializing...</div>
            <div id="loadingDetails" class="loading-details-text">Preparing game systems...</div>
            <div id="loadingStep" class="loading-step">Step 1 of 8</div>
        </div>
    </div>

    <div class="container">
        <h1>ğŸ° Bunny Runaway!</h1>
        <p class="subtitle">A Strategic Puzzle Game Designed and Built by ParadoxSolver</p>
        
        <div class="game-area">
            <div class="canvas-container">
                <canvas id="gameCanvas" class="game-canvas" width="900" height="600"></canvas>
                
                <!-- ä¿¡æ¯æŒ‰é’® -->
                <div class="info-button" id="infoButton">
                    <span>â„¹ï¸</span>
                </div>
                
                <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
                <div class="music-button" id="musicButton">
                    <span id="musicIcon">ğŸ”Š</span>
                </div>
                
                <!-- ä¿¡æ¯èœå• -->
                <div class="info-menu" id="infoMenu" style="display: none;">
                    <div class="info-menu-item" id="tutorialBtn">
                        <span>ğŸ“–</span> Tutorial
                    </div>
                    <div class="info-menu-item" id="aboutBtn">
                        <span>â„¹ï¸</span> About
                    </div>
                    <div class="info-menu-item" id="creditsBtn">
                        <span>ğŸ‘¥</span> Credits
                    </div>
                    <div class="info-menu-item" id="licenseBtn">
                        <span>ğŸ“„</span> License
                    </div>
                </div>
            </div>
            
            <div class="info-panel">
                <h3>ğŸ® Game Status</h3>
                <div class="status-item">
                    <span class="status-label">Game Status:</span>
                    <span class="status-value" id="gameStatus">Initial</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Remaining Blockers:</span>
                    <span class="status-value" id="blockerCount">0</span>
                </div>
                
                <h3>ğŸ—ºï¸ Map Controls</h3>
                <div class="status-item">
                    <span class="status-label">Map Info:</span>
                    <span class="status-value" id="mapInfo">Not Loaded</span>
                </div>
                <div class="map-controls">
                    <div class="difficulty-toggle">
                        <span class="toggle-text" id="easyModeText">Easy mode</span>
                        <div class="mode-switch" id="difficultyToggle" data-difficulty="easy">
                        </div>
                        <span class="toggle-text" id="hardModeText">Hard mode</span>
                    </div>
                    <div class="map-selector">
                        <button class="control-btn" id="prevMapBtn" disabled>Previous Map</button>
                        <button class="control-btn" id="nextMapBtn" disabled>Next Map</button>
                        <button class="control-btn" id="randomMapBtn" disabled>Try Your Luck</button>
                        <button class="control-btn" id="customMapBtn" disabled>Select Map</button>
                    </div>
                </div>
                
                <div class="controls">
                    <h3>ğŸ¯ Game Controls</h3>
                    <div class="game-selector">
                        <button class="control-btn" id="unifiedGameBtn" disabled>Start Game</button>
                        <button class="control-btn" id="pauseBtn" disabled>Pause Game</button>
                    </div>
                    <div class="documentation-button-container">
                        <button class="control-btn documentation-btn" id="showDocumentationBtn">ğŸ“– Show Documentation</button>
                    </div>
                </div>
                
                <!-- ç‰ˆæƒä¿¡æ¯ -->
                <div class="copyright-info">
                    <p>Â© 2025 ParadoxSolver | Bunny Runaway</p>
                </div>
            </div>
        </div>
        
        <!-- æ–‡æ¡£åŒºåŸŸ -->
        <div class="documentation-section" id="documentationSection" style="display: none;">
            <div class="documentation-header">
                <h2>ğŸ“– Game Documentation</h2>
                <button class="control-btn" id="toggleDocumentationBtn">Hide Documentation</button>
            </div>
            <div class="documentation-content" id="documentationContent">
                <!-- Markdown å†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ -->
            </div>
        </div>
    </div>

    <!-- è‡ªé€‰åœ°å›¾å¯¹è¯æ¡† -->
    <div id="customMapDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content">
            <h3>ğŸ¯ Custom Map Selection</h3>
            <div class="dialog-body">
                <label for="customMapNumber">Map Number (1-30):</label>
                <input type="number" id="customMapNumber" class="map-number-input" 
                       min="1" max="30" value="1">
                <div class="dialog-buttons">
                    <button class="control-btn" id="confirmCustomMap">Confirm</button>
                    <button class="control-btn" id="cancelCustomMap">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¸¸æˆèƒœåˆ©åº†ç¥ç”»é¢ -->
    <div id="victoryDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content victory-content">
            <div class="victory-header">
                <h2 id="victoryTitle">ğŸ‰ Victory! ğŸ‰</h2>
                <p id="victoryMessage">Congratulations! You successfully trapped the bunny!</p>
            </div>
            <div class="dialog-buttons">
                <button class="control-btn victory-btn" id="continueCurrentMapBtn">Continue with Current Map</button>
                <button class="control-btn victory-btn" id="tryNextMapBtn">Try Next Map</button>
            </div>
        </div>
    </div>

    <!-- æ•™ç¨‹å¯¹è¯æ¡† -->
    <div id="tutorialDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content info-dialog">
            <h3>ğŸ“– Game Tutorial</h3>
            <div class="dialog-body">
                <div class="tutorial-content">
                    <h4>ğŸ¯ How to Play</h4>
                    <p><strong>Goal:</strong> Prevent the bunny from escaping through any of the four corner holes!</p>
                    
                    <h4>ğŸ® Controls</h4>
                    <ul>
                        <li><strong>Click on paths</strong> to place barriers</li>
                        <li><strong>Start Game</strong> to begin the countdown</li>
                        <li><strong>Pause Game</strong> to pause the game</li>
                        <li><strong>Stop Game</strong> to end the current game</li>
                    </ul>
                    
                    <h4>ğŸ§  Strategy Tips</h4>
                    <ul>
                        <li>The bunny will always find the shortest path to escape</li>
                        <li>Block multiple routes, not just one</li>
                        <li>Use your barriers wisely - you have limited supplies</li>
                        <li>Watch the bunny's movement patterns</li>
                    </ul>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button class="control-btn" id="readFullTutorialBtn" style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-weight: bold;">ğŸ“– Read Full Tutorial</button>
                    </div>
                </div>
            </div>
            <div class="dialog-buttons">
                <button class="control-btn" id="closeTutorialBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- å…³äºæ¸¸æˆå¯¹è¯æ¡† -->
    <div id="aboutDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content info-dialog">
            <h3>â„¹ï¸ About Bunny Runaway</h3>
            <div class="dialog-body">
                <div class="about-content">
                    <p><strong>Bunny Runaway</strong> is a strategic puzzle game that combines pathfinding AI with player strategy.</p>
                    
                    <h4>ğŸ® Game Features</h4>
                    <ul>
                        <li>ğŸ§  Strategic gameplay with intelligent bunny AI</li>
                        <li>ğŸ—ºï¸ Multiple maps across Easy and Hard difficulties</li>
                        <li>ğŸŒ Multi-language support</li>
                        <li>ğŸµ Immersive audio experience</li>
                        <li>âš™ï¸ Customizable game settings</li>
                    </ul>
                    
                    <h4>ğŸ“Š Game Info</h4>
                    <ul>
                        <li><strong>Version:</strong> 1.0</li>
                        <li><strong>Release Year:</strong> 2025</li>
                        <li><strong>Developer:</strong> ParadoxSolver</li>
                        <li><strong>Platform:</strong> Web Browser</li>
                    </ul>
                </div>
            </div>
            <div class="dialog-buttons">
                <button class="control-btn" id="closeAboutBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- åˆ¶ä½œäººå‘˜å¯¹è¯æ¡† -->
    <div id="creditsDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content info-dialog">
            <h3>ğŸ‘¥ Credits</h3>
            <div class="dialog-body">
                <div class="credits-content">
                    <h4>ğŸ® Game Development</h4>
                    <p><strong>Developer:</strong> ParadoxSolver</p>
                    <p><strong>Game Design:</strong> Strategic Puzzle Mechanics</p>
                    <p><strong>AI Programming:</strong> Pathfinding & Decision Making</p>
                    
                    <h4>ğŸ¨ Assets & Resources</h4>
                    <p><strong>Graphics:</strong> Custom pixel art and sprites</p>
                    <p><strong>Audio:</strong> Background music and sound effects</p>
                    <p><strong>Fonts:</strong> Source Sans 3, Source Han Sans</p>
                    
                    <h4>ğŸŒ Localization</h4>
                    <p>Multi-language support for English, Chinese, Japanese, Korean, German, French, and Spanish</p>
                    
                    <h4>ğŸ’» Technology</h4>
                    <p><strong>Frontend:</strong> HTML5 Canvas, JavaScript ES6+</p>
                    <p><strong>Architecture:</strong> Modular Component System</p>
                    <p><strong>State Management:</strong> Custom State Machine</p>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button class="control-btn" id="readFullCreditsBtn" style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-weight: bold;">ğŸ‘¥ Read Full Credits</button>
                    </div>
                </div>
            </div>
            <div class="dialog-buttons">
                <button class="control-btn" id="closeCreditsBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- è®¸å¯è¯å¯¹è¯æ¡† -->
    <div id="licenseDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content info-dialog">
            <h3>ğŸ“„ License</h3>
            <div class="dialog-body">
                <div class="license-content">
                    <h4>Â© 2025 ParadoxSolver. All Rights Reserved.</h4>
                    
                    <h4>Game Information</h4>
                    <ul>
                        <li><strong>Game Title:</strong> Bunny Runaway</li>
                        <li><strong>Developer:</strong> ParadoxSolver</li>
                        <li><strong>Release Year:</strong> 2025</li>
                        <li><strong>Platform:</strong> Web Browser</li>
                    </ul>
                    
                    <h4>License Terms</h4>
                    <p>This game is provided for personal entertainment purposes. All game content, including graphics, audio, and code, is protected by copyright law.</p>
                    
                    <p><strong>Usage Rights:</strong> You may play this game for personal enjoyment. Commercial use, redistribution, or modification without permission is prohibited.</p>
                    
                    <p><strong>Disclaimer:</strong> This game is provided "as is" without warranty of any kind.</p>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button class="control-btn" id="readFullLicenseBtn" style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-weight: bold;">ğŸ“„ Read Full License</button>
                    </div>
                </div>
            </div>
            <div class="dialog-buttons">
                <button class="control-btn" id="closeLicenseBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- åœæ­¢æ¸¸æˆç¡®è®¤å¯¹è¯æ¡† -->
    <div id="stopGameDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content">
            <h3>Stop Game</h3>
            <div class="dialog-body">
                <p>Are you sure you want to stop the current game?</p>
            </div>
            <div class="dialog-buttons">
                <button class="control-btn" id="confirmStopBtn">Yes, Stop</button>
                <button class="control-btn" id="cancelStopBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- æ–°æ¸¸æˆå¯¹è¯æ¡† -->
    <div id="newGameDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content">
            <h3>New Game</h3>
            <div class="dialog-body">
                <p>Would you like to proceed to the next map?</p>
            </div>
            <div class="dialog-buttons">
                <button class="control-btn" id="confirmNewGameBtn">Next Map</button>
                <button class="control-btn" id="cancelNewGameBtn">Restart Current</button>
            </div>
        </div>
    </div>

    <!-- åœ°å›¾é€‰æ‹©å¯¹è¯æ¡† -->
    <div id="mapSelectionDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content">
            <h3>Map Selection</h3>
            <div class="dialog-body">
                <p>Select a map to play:</p>
                <div class="map-options">
                    <button class="control-btn" id="nextMapBtn">Next Map</button>
                    <button class="control-btn" id="randomMapBtn">Random Map</button>
                    <button class="control-btn" id="customMapBtn">Custom Map</button>
                </div>
            </div>
            <div class="dialog-buttons">
                <button class="control-btn" id="confirmMapSelectionBtn">Start Game</button>
                <button class="control-btn" id="cancelMapSelectionBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- å®Œæ•´æ–‡æ¡£æ˜¾ç¤ºå¯¹è¯æ¡† -->
    <div id="fullDocumentDialog" class="dialog-overlay" style="display: none;">
        <div class="dialog-content info-dialog" style="max-width: 90vw; max-height: 90vh;">
            <h3 id="fullDocumentTitle">ğŸ“– Full Document</h3>
            <div class="dialog-body">
                <div id="fullDocumentContent" style="text-align: left; line-height: 1.6;">
                    <!-- å®Œæ•´æ–‡æ¡£å†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ -->
                </div>
            </div>
            <div class="dialog-buttons">
                <button class="control-btn" id="closeFullDocumentBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- çº¯JavaScriptæ¸¸æˆåˆå§‹åŒ–è„šæœ¬ -->
    <!-- æ¨¡å—åŒ–è„šæœ¬ - çº¯JavaScriptç‰ˆæœ¬ -->
    <script type="module" src="src/app.js"></script>
</body>
</html>
